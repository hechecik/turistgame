<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TURİST</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

    body {
        margin:0; padding:20px 10px; min-height:100vh;
        background: linear-gradient(135deg, #0d0d0, #1a001a);
        color:#fff; font-family:'Segoe UI',sans-serif;
        display:flex; flex-direction:column; align-items:center;
        user-select:none; overflow-x:hidden;
    }

    .title {
        font-family:'Orbitron',sans-serif; font-size:3.8vw; letter-spacing:12px;
        background:linear-gradient(90deg,#ff3366,#ffcc00,#00ffcc);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent;
        text-shadow:0 0 30px rgba(255,51,102,0.6);
        margin:10px 0 5px;
    }

    .turn {
        font-size:1.4rem; padding:10px 30px; border-radius:50px;
        background:rgba(255,255,255,0.1); backdrop-filter:blur(10px);
        border:1px solid rgba(255,255,255,0.2); margin:10px 0;
    }

    .scoreboard {
        display:flex; gap:30px; margin:15px 0;
        background:rgba(0,0,0,0.4); padding:12px 30px; border-radius:25px;
        backdrop-filter:blur(10px);
    }
    .score { text-align:center; min-width:110px; }
    .score span { font-size:2.2rem; font-weight:bold; display:block; margin-top:5px; }
    .red { color:#ff3366; } .yellow { color:#ffcc33; }

    .game {
        width:92vw; max-width:420px; aspect-ratio:1/1.3;
        display:flex; flex-direction:column; align-items:center;
    }

    .board {
        width:100%; aspect-ratio:1/1; background:#0f0a1a; border-radius:20px;
        position:relative; box-shadow:0 20px 50px rgba(0,0,0,0.8);
        overflow:hidden;
    }

    .lines line {
        stroke:#6e00ff; stroke-width:6; stroke-linecap:round;
        filter:drop-shadow(0 0 8px #9d4edd);
    }

    .spot {
        position:absolute; width:18%; height:18%;
        transform:translate(-50%,-50%);
        background:rgba(255,255,255,0.05);
        border-radius:50%; transition:all 0.3s;
    }
    .spot:hover { background:rgba(255,255,255,0.15); }

    .piece {
        position:absolute; width:15%; aspect-ratio:1/1;
        border-radius:50%; cursor:grab;
        transform:translate(-50%,-50%);
        transition:all 0.25s cubic-bezier(0.2,0.8,0.2,1);
        box-shadow: 
            0 10px 20px rgba(0,0,0,0.6),
            0 0 30px rgba(255,255,255,0.1);
    }
    .piece:active { transform:translate(-50%,-50%) scale(1.15); cursor:grabbing; }

    .red   { background:radial-gradient(circle at 30% 30%, #ff3366, #cc0033); 
              border:3px solid #ff6699; }
    .yellow { background:radial-gradient(circle at 30% 30%, #ffff66, #ffaa00);
              border:3px solid #ffdd88; }

    .pools {
        display:flex; justify-content:space-between; width:100%; margin-top:20px;
        padding:15px; background:rgba(0,0,0,0.4); border-radius:20px;
        backdrop-filter:blur(10px);
    }
    .pool { width:48%; height:70px; background:rgba(255,255,255,0.05);
            border-radius:16px; display:flex; gap:12px; justify-content:center; align-items:center; }

    .btn {
        margin-top:25px; padding:16px 40px; border:none; border-radius:50px;
        font-size:1.3rem; font-weight:bold; color:white; cursor:pointer;
        background:linear-gradient(45deg,#00ff88,#0099ff);
        box-shadow:0 10px 30px rgba(0,0,0,0.5);
        transition:0.3s;
    }
    .btn:active { transform:scale(0.95); }

    .modal {
        position:fixed; inset:0; background:rgba(0,0,0,0.95);
        display:flex; align-items:center; justify-content:center; backdrop-filter:blur(12px);
    }
    .modal-content {
        background:#1a001a; padding:40px; border-radius:25px;
        border:2px solid #6e00ff; text-align:center; box-shadow:0 0 50px #9d4edd;
    }
</style>
</head>
<body>

<div class="title">TURİST</div>
<div class="turn" id="turn">Sıra: Kırmızı</div>

<div class="scoreboard">
    <div class="score red"><div id="p1-name">Kırmızı</div><span id="s1">0</span></div>
    <div class="score yellow"><div id="p2-name">Sarı</div><span id="s2">0</span></div>
</div>

<div class="game">
    <div class="board" id="board">
        <svg class="lines" viewBox="0 0 300 300">
            <line x1="30" y1="30" x2="270" y2="30"/>
            <line x1="270" y1="30" x2="270" y2="270"/>
            <line x1="270" y1="270" x2="30" y2="270"/>
            <line x1="30" y1="270" x2="30" y2="30"/>
            <line x1="150" y1="30" x2="150" y2="270"/>
            <line x1="30" y1="150" x2="270" y2="150"/>
            <line x1="30" y1="30" x2="270" y2="270"/>
            <line x1="270" y1="30" x2="30" y2="270"/>
        </svg>
    </div>
    <div class="pools">
        <div class="pool" id="poolR"></div>
        <div class="pool" id="poolY"></div>
    </div>
</div>

<button class="btn" onclick="newGame()">YENİ OYUN</button>

<div class="modal" id="win" style="display:none">
    <div class="modal-content">
        <h2 id="winner" style="font-size:3rem; margin:20px 0"></h2>
        <button class="btn" onclick="newGame()" style="background:#ff3366">TEKRAR OYNA</button>
    </div>
</div>

<script>
const pos = [{l:10,t:10},{l:50,t:10},{l:90,t:10},{l:10,t:50},{l:50,t:50},{l:90,t:50},{l:10,t:90},{l:50,t:90},{l:90,t:90}];
const adj = [[1,3,4],[0,2,4],[1,5,4],[0,4,6],[0,1,2,3,5,6,7,8],[2,4,8],[3,4,7],[6,4,8],[4,5,7]];
const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

let board = Array(9).fill(null), turn = Math.random()<0.5?'R':'Y', phase='placing', inPlay={R:0,Y:0}, score={R:0,Y:0};

function $(id){return document.getElementById(id)}
function newGame(){
    board.fill(null); phase='placing'; inPlay={R:0,Y:0};
    turn = Math.random()<0.5?'R':'Y';
    $('turn').textContent = `Sıra: ${turn=='R'?'Kırmızı':'Sarı'}`;
    $('board').innerHTML = '<svg class="lines" viewBox="0 0 300 300">...</svg>';
    $('poolR').innerHTML=''; $('poolY').innerHTML='';
    pos.forEach((p,i)=>{$('board').innerHTML+=`<div class="spot" style="left:${p.l}%;top:${p.t}%"></div>`});
    for(let i=0;i<3;i++){
        ['R','Y'].forEach(c=>$(`pool${c}`).innerHTML+=`<div class="piece ${c=='R'?'red':'yellow'}" data-i="${i}" data-p="${c}"></div>`);
    }
    addDragEvents();
    $('win').style.display='none';
}
function addDragEvents(){
    document.querySelectorAll('.piece').forEach(p=>{
        p.ontouchstart = p.onmousedown = dragStart;
    });
}
let dragged=null, startSpot=-1;
function dragStart(e){
    e.preventDefault();
    let p = e.target;
    if(p.dataset.p !== turn || (phase=='placing' && p.parentNode.id!='pool'+turn)) return;
    dragged=p; startSpot = p.dataset.spot||-1;
    p.style.position='fixed'; p.style.zIndex=999; p.style.transition='none';
    document.onmousemove=document.ontouchmove=drag; 
    document.onmouseup=document.ontouchend=end;
}
function drag(e){
    let x = e.touches?e.touches[0].clientX:e.clientX;
    let y = e.touches?e.touches[0].clientY:e.clientY;
    dragged.style.left = x+'px'; dragged.style.top = y+'px';
}
function end(){
    let closest = -1, dist=999;
    document.querySelectorAll('.spot').forEach((s,i)=>{
        let r=s.getBoundingClientRect(), d=Math.hypot(r.left+r.width/2 - dragged.getBoundingClientRect().left-dragged.offsetWidth/2, r.top+r.height/2 - dragged.getBoundingClientRect().top-dragged.offsetHeight/2);
        if(d<dist){dist=d;closest=i;}
    });
    let valid = closest>-1 && board[closest]==null && (phase=='placing' && startSpot==-1 || phase=='moving' && adj[startSpot].includes(closest));
    if(valid){
        board[closest]=turn;
        if(startSpot!=-1) board[startSpot]=null;
        dragged.dataset.spot=closest;
        dragged.style.position='absolute';
        dragged.style.left=pos[closest].l+'%';
        dragged.style.top=pos[closest].t+'%';
        $('board').appendChild(dragged);
        if(phase=='placing') inPlay[turn]++;
        if(inPlay.R==3 && inPlay.Y==3) phase='moving';
        if(wins.some(w=>w.every(i=>board[i]==turn))){
            score[turn]++; $(turn=='R'?'s1':'s2').textContent=score[turn];
            $('winner').textContent = (turn=='R'?'Kırmızı':'Sarı')+' KAZANDI!';
            $('win').style.display='flex'; return;
        }
        if(phase=='moving' && !board.some((c,i)=>c==turn && adj[i].some(n=>board[n]==null))){
            $('winner').textContent='BERABERE!'; $('win').style.display='flex'; return;
        }
        turn=turn=='R'?'Y':'R';
        $('turn').textContent = `Sıra: ${turn=='R'?'Kırmızı':'Sarı'}`;
    }else{
        if(startSpot==-1) $(`pool${turn}`).appendChild(dragged);
        else{ dragged.style.left=pos[startSpot].l+'%'; dragged.style.top=pos[startSpot].t+'%'; }
    }
    dragged.style.transition='all 0.25s cubic-bezier(0.2,0.8,0.2,1)';
    dragged=null;
}
newGame();
</script>
</body>
</html>
